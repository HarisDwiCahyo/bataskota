import{c as s}from"./main.esm-BcYrPVTO.js";import{g as c}from"./t-wkt.esm-CtkApKJt.js";var d;document.addEventListener("DOMContentLoaded",function(){d={defaultColDef:{width:200,resizable:!0,filter:!0,floatingFilter:!0,sortable:!0},columnDefs:[{headerName:"No",field:"gid",width:75,filter:!1,sortable:!1},{headerName:"Kemantren",field:"kemantren"},{headerName:"Kelurahan",field:"kelurahan"},{headerName:"Kondisi",field:"kondisi"},{headerName:"Longitude",field:"east"},{headerName:"Latitude",field:"south"},{headerName:"No Pilar",field:"nopilar"},{headerName:"Northing",field:"northing"},{headerName:"Easting",field:"easting"},{headerName:"Ketinggian",field:"up"},{headerName:"Peraturan",field:"peraturan"},{headerName:"Perbatasan",field:"perbatasan"},{headerName:"Berita Acara",field:"beritaacara",cellRenderer:function(e){return`<a href="${e.value}" target="_blank">${e.value}</a>`}},{headerName:"Alamat",field:"alamat"},{headerName:"Tahun Pembuatan",field:"pembuatan"},{headerName:"Tahun Pemeliharaan",field:"pemeliharaan"},{headerName:"Polygon",field:"polygon"},{headerName:"Foto",field:"foto",cellRenderer:function(e){var a=e.value,t="/upload/foto/"+a,r='<a href="'+t+'">'+a+"</a>";return r}},{headerName:"Tanggal",field:"tanggal"},{headerName:"Operator",field:"operator"},{headerName:"Created At",field:"created_at"},{headerName:"Updated At",field:"updated_at"},{headerName:"Aksi",cellRenderer:function(e){var a="/admin/formeditpilar/"+e.data.gid,t="/admin/kirimpilar/"+e.data.gid,r="/admin/hapuspilar/"+e.data.gid;return'<div class="d-flex justify-content-center align-items-center"><a href="'+a+'" class="btn btn-edit" title="Ubah"><i class="icon-edit" style="color: #FFD43B; font-size: 30px;"></i></a><a href="'+t+`" class="btn btn-upload" title="Kirim" onclick="return confirm('Yakin nih data `+e.data.nopilar+` akan dikirim?')"><i class="icon-upload-to-cloud" style="color: #2b3ac1; font-size: 30px;"></i></a><a href="`+r+`" class="btn btn-delete" title="Hapus" onclick="return confirm('Yakin nih data `+e.data.nopilar+` akan dihapus?')"><i class="icon-bin" style="color: #e1143d; font-size: 25px;"></i></a></div>`},pinned:"right",width:160,filter:!1,sortable:!1}],rowData:data,pagination:!0,paginationPageSize:10,rowSelection:"single"};var l=document.querySelector("#myGrid");const n=s(l,d);$.getJSON("/admin/bataspilar",function(e){if(e&&e.data&&e.data.features){var a={};e.data.features.forEach(function(t){var r=t.properties.gid,i=t.geometry,o=c(i);a[r]=o}),n.forEachNode(function(t){var r=t.data.gid,i=a[r];t.setDataValue("polygon",i)}),n.refreshCells()}else console.error("Invalid GeoJSON data received:",e)}),document.getElementById("excelOption").addEventListener("click",function(){var e=n,a={skipHeader:!1,columnGroups:!1,fileName:"data_export",sheetName:"Sheet1",customHeader:[],customFooter:[]};a&&(a.columnGroups?e.exportDataAsExcel(a):e.exportDataAsCsv(a))}),document.getElementById("geojsonOption").addEventListener("click",function(){$.getJSON("/admin/bataspilar",function(e){var a=JSON.stringify(e,null,2),t=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=r,i.download="data_export.geojson",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r)})})});
