import{V as ne,f as oe,M as ve,T as N,O as ge,X as J,L as ae,G as fe,b as X,c as K,S as C,C as T,d as m,e as y,N as we,Q as ye,a as he,g as Ee,h as Ce,i as be,j as w,D as Le,k as re,l as Be,F as le,P as Y,m as Ie,n as Se,o as ke,p as ie,q as Ge,r as Me}from"./GeoJSON-C5wKpImO.js";import{g as ze}from"./t-wkt.esm-CtkApKJt.js";import{G as Ne}from"./Geolocation-DOMlNKP2.js";var S=new ne({center:oe([110.35385111973005,-7.791739623962835]),zoom:18}),t=new ve({target:"map",view:S,controls:[]}),Te=new N({title:"Open Street Map",visible:!0,source:new ge}),Fe=new N({title:"Esri Maps",visible:!0,source:new J({attributions:["Tiles © Esri"],url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"})}),Pe=new N({title:"World Street Map",visible:!0,source:new J({attributions:["Tiles © Esri"],url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"})}),xe=new N({title:"World Imagery Map",visible:!0,source:new J({attributions:["Tiles © Esri"],url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),De=new ae({title:"BaseMaps",layers:[Fe,Te,Pe,xe]});t.addLayer(De);$.getJSON("/bataspilar",function(e){var n=data[0].gid,o=e.data.features.filter(function(V){return V.properties.gid===n}),l={type:"FeatureCollection",features:o},c=new fe,h=c.readFeatures(l,{featureProjection:"EPSG:3857"}),a=new X({features:h}),E=new K({title:"Titik Batas Pilar",source:a,style:function(V){var pe=V.getGeometry().getType();return pe==="Point"?new C({image:new T({radius:7,fill:new m({color:"red"}),stroke:new y({color:"white",width:2})})}):new C({stroke:new y({color:"blue",width:2}),fill:new m({color:"rgba(0, 0, 255, 0.1)"})})}});se.getLayers().push(E);var Q=a.getExtent(),de=we(Q,ye(Q)*.1);t.getView().fit(de,{duration:1e3,maxZoom:19})});$.getJSON("/admin/bataspilar",function(e){var n=data[0].gid,o=e.data.features.filter(function(a){return a.properties.gid===n}),l=o[0].geometry,c=ze(l),h=document.getElementById("geom");h.value=c});var se=new ae({title:"Group",layers:[]});t.addLayer(se);const Oe=new he({tipLabel:"Show Layers",groupSelectStyle:"children",collapseTipLabel:"Collapse layers"});t.addControl(Oe);var Ae=new Ee({className:"mousePosition",projection:"EPSG:4326",coordinateFormat:function(e){return Ce(e,"{y} , {x}",6)}});t.addControl(Ae);var He=new be({target:"custom-scale-line",text:!0,bar:!0});t.addControl(He);var s=document.createElement("div");s.className="toolbarDiv";var L=document.createElement("button");L.innerHTML='<span class="icon"><i class="icon-home"></i></span>';L.className="myButton";L.title="Home";var F=document.createElement("div");F.className="homeButtonDiv";F.appendChild(L);s.appendChild(F);var je=new w({element:F});L.addEventListener("click",()=>{ue(),t.setView(new ne({center:oe([110.35385111973005,-7.791739623962835]),zoom:18}))});t.addControl(je);let B=document.createElement("button");B.innerHTML='<span class="icon"><i class="icon-enlarge"></i></span>';B.className="myButton";B.title="FullScreen";var P=document.createElement("div");P.className="fsButtonDiv";P.appendChild(B);s.appendChild(P);let Ve=new w({element:P});B.addEventListener("click",()=>{let e=document.getElementById("map");e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullscreen?e.mozRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()});t.addControl(Ve);let d=document.createElement("button");d.innerHTML='<span class="icon"><i class="icon-hand"></i></span>';d.className="myButton";d.id="panButton";d.title="Pan";let x=document.createElement("div");x.className="panButtonDiv";x.appendChild(d);s.appendChild(x);let qe=new w({element:x}),q=!1,U=new Le;d.addEventListener("click",()=>{d.classList.toggle("clicked"),q=!q,q?(document.getElementById("map").style.cursor="grab",t.addInteraction(U)):(document.getElementById("map").style.cursor="default",t.removeInteraction(U))});t.addControl(qe);var k=new re;k.on("boxend",function(){var e=k.getGeometry().getExtent();t.getView().fit(e)});var p=document.createElement("button");p.innerHTML='<span class="icon"><i class="icon-zoom-in"></i></span>';p.className="myButton";p.id="ziButton";p.title="ZoomIn";var D=document.createElement("div");D.className="ziButtonDiv";D.appendChild(p);s.appendChild(D);var We=new w({element:D}),W=!1;p.addEventListener("click",()=>{p.classList.toggle("clicked"),W=!W,W?(document.getElementById("map").style.cursor="zoom-in",t.addInteraction(k)):(t.removeInteraction(k),document.getElementById("map").style.cursor="default")});t.addControl(We);var G=new re;G.on("boxend",function(){var e=G.getGeometry().getExtent();t.getView().setCenter(Be(e)),S.setZoom(S.getZoom()-1)});var v=document.createElement("button");v.innerHTML='<span class="icon"><i class="icon-zoom-out"></i></span>';v.className="myButton";v.id="zoButton";v.title="Zoom Out";var O=document.createElement("div");O.className="zoButtonDiv";O.appendChild(v);s.appendChild(O);var $e=new w({element:O}),R=!1;v.addEventListener("click",()=>{v.classList.toggle("clicked"),R=!R,R?(document.getElementById("map").style.cursor="zoom-out",t.addInteraction(G)):(t.removeInteraction(G),document.getElementById("map").style.cursor="default")});t.addControl($e);$("#btnCrosshair").on("click",function(e){$("#btnCrosshair").toggleClass("clicked"),$("#btnCrosshair").hasClass("clicked")?Re():ue()});var ce,I=new Ne({trackingOptions:{enableHighAccuracy:!0},tracking:!0,projection:S.getProjection()}),b=new le;b.setStyle(new C({image:new T({radius:6,fill:new m({color:"#3399cc"}),stroke:new y({color:"#fff",width:2})})}));var M=new le;new K({map:t,source:new X({features:[M,b]})});function Re(){var e=I.getPosition();b.setGeometry(e?new Y(e):null),M.setGeometry(I.getAccuracyGeometry()),e&&t.getView().animate({center:e,zoom:16,duration:1e3}),ce=setInterval(function(){var n=I.getPosition(),o=I.getAccuracyGeometry();b.setGeometry(n?new Y(n):null),M.setGeometry(o),n&&t.getView().animate({center:n,duration:1e3})},1e4)}function ue(){clearInterval(ce),b.setGeometry(null),M.setGeometry(null)}let g=document.createElement("button");g.innerHTML='<span class="icon"><i class="icon-ruler"></i></span>';g.className="myButton";g.id="lengthButton";g.title="Measure Length";var A=document.createElement("div");A.className="lengthButtonDiv";A.appendChild(g);s.appendChild(A);var Ze=new w({element:A}),Z=!1;g.addEventListener("click",()=>{if(g.classList.toggle("clicked"),Z=!Z,document.getElementById("map").style.cursor="default",Z)t.removeInteraction(i),me("LineString");else{t.removeInteraction(i),j.clear();const e=document.getElementsByClassName("ol-tooltip ol-tooltip-static");for(;e.length>0;)e[0].remove()}});t.addControl(Ze);let f=document.createElement("button");f.innerHTML='<span class="icon"><i class="icon-straighten"></i></span>';f.className="myButton";f.id="areaButton";f.title="Measure Area";var H=document.createElement("div");H.className="areaButtonDiv";H.appendChild(f);s.appendChild(H);var _e=new w({element:H}),_=!1;f.addEventListener("click",()=>{if(f.classList.toggle("clicked"),_=!_,document.getElementById("map").style.cursor="default",_)t.removeInteraction(i),me("Polygon");else{t.removeInteraction(i),j.clear();const e=document.getElementsByClassName("ol-tooltip ol-tooltip-static");for(;e.length>0;)e[0].remove()}});t.addControl(_e);var i,j=new X,Je=new K({source:j,style:new C({fill:new m({color:"rgba(255, 255, 255, 0.2)"}),stroke:new y({color:"#ffcc33",width:2}),image:new T({radius:7,fill:new m({color:"#ffcc33"})})})});t.addLayer(Je);function me(e){i=new Ie({source:j,type:e,style:new C({fill:new m({color:"rgba(200, 200, 200, 0.6)"}),stroke:new y({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new T({radius:5,stroke:new y({color:"rgba(0, 0, 0, 0.7)"}),fill:new m({color:"rgba(255, 255, 255, 0.2)"})})})}),t.addInteraction(i),te(),Xe();var n,o=function(l){l.dragging||n&&n.getGeometry()};t.on("pointermove",o),i.on("drawstart",function(l){n=l.feature;var c=l.coordinate;n.getGeometry().on("change",function(h){var a=h.target,E;a instanceof Se?(E=Qe(a),c=a.getInteriorPoint().getCoordinates()):a instanceof ke&&(E=Ke(a),c=a.getLastCoordinate()),r.innerHTML=E,z.setPosition(c)})}),i.on("drawend",function(){r.className="ol-tooltip ol-tooltip-static",z.setOffset([0,-7]),n=null,r=null,te()})}var u,ee;function Xe(){u&&u.parentNode.removeChild(u),u=document.createElement("div"),u.className="ol-tooltip hidden",ee=new ie({element:u,offset:[15,0],positioning:"center-left"}),t.addOverlay(ee)}$(t.getViewport()).on("mouseout",function(){$(u).addClass("hidden")});var r,z;function te(){r&&r.parentNode.removeChild(r),r=document.createElement("div"),r.className="ol-tooltip  ol-tooltip-measure",z=new ie({element:r,offset:[0,-15],positioning:"bottom-center"}),t.addOverlay(z)}var Ke=function(e){var n=Ge(e,{projection:"EPSG:3857"}),o;return n>1e3?o=Math.round(n/1e3*100)/100+" km":o=Math.round(n*100)/100+" m",o},Qe=function(e){var n=Me(e,{projection:"EPSG:3857"}),o;return n>1e6?o=Math.round(n/1e6*100)/100+" km<sup>2</sup>":o=Math.round(n*100)/100+" m<sup>2</sup>",o};
